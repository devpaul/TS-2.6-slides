"use strict";
const createServer_1 = require("../commands/createServer");
const log_1 = require("../log");
const util_1 = require("util");
module.exports = function (grunt) {
    grunt.registerMultiTask('webserv', function () {
        const done = this.async();
        const server = createServer_1.default(this.data);
        log_1.log.debug(`Grunt configuration: ${util_1.inspect(this.data, { depth: 3 })}`);
        server.start().then(function (state) {
            log_1.log.info(`Server started on port ${server.port}`);
            state.closed.then(done);
        }, done);
    });
};
//# sourceMappingURL=webserv.js.map