"use strict";
const WebServer_1 = require("../WebServer");
const Group_1 = require("../handlers/Group");
const ServeFile_1 = require("../middleware/ServeFile");
const ServeDirectory_1 = require("../middleware/ServeDirectory");
function default_1(config) {
    const server = new WebServer_1.default({
        port: config.port
    });
    if (config.middleware) {
        const middleware = (typeof config.middleware === 'function') ? config.middleware() : config.middleware;
        for (let handler of middleware) {
            server.app.middleware.add(handler);
        }
    }
    if (config.directory) {
        server.app.middleware.add(new Group_1.default([
            new ServeFile_1.default(config.directory),
            new ServeDirectory_1.default(config.directory)
        ]));
    }
    if (config.timeout) {
        server.app.timeout = config.timeout;
    }
    return server;
}
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = default_1;
//# sourceMappingURL=createServer.js.map